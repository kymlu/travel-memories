<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Memories from Japan — 日本の思い出</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body class="page-bg">
  <!-- Top bar -->
  <div id="top-bar" class="top-bar transparent" style="z-index: 5000;">
    <button id="map-btn" class="text-main-color large-icon"
      style="display: none; z-index: 5001;">&#xf279</button>
    <div id="pref-title" class="pref-title">
      <div id="pref-name" class="regular-text bold-text" style="display: none;"></div>
      <!-- <div id="pref-name-btn-up" class="text-main-color large-icon" style="display: none">&#xf0d7</div> -->
      <button id="pref-name-arrow" class="text-main-color large-icon transform-transition down-arrow" style="display: none">&#xf0d8</button>
    </div>
    <button id="info-btn" class="text-main-color large-icon">&#xf05a</button>
  </div>

  <!-- Map Page (Map and Prefecture List) -->
  <div id="map-page" class="map-page transparent opacity-transition">
    <object id="japan-map" type="image/svg+xml" class="japan-map"></object>
    <div id="main-title" class="main-title"></div>
    <div id="map-instructions" class="regular-text" style="text-align: center; cursor: pointer; display: none;"></div>
    <div id="pref-list" class="pref-list"></div>
  </div>

  <!-- Prefecture Info -->
  <div id="top-drawer" style="display:none; z-index: 4999; position: relative; scroll-snap-align: start;">
    <div id="pref-info-bg" class="popup-bg opacity-transition portrait-only transparent"></div>
    <div id="pref-info" class="slider">
      <div class="pref-info">
        <object id="japan-map-mini" type="image/svg+xml" data="img/japan.svg" class="mini-map opacity-transition transparent"></object>
        <div class="flex-column regular-text pref-info-text">
          <div>
            <div id="dates-title" class="bold-text">Dates visited — 訪れた日付</div>
            <div id="pref-dates"></div>
          </div>
          <div>
            <div id="cities-title" class="bold-text">Cities and significant places visited — 訪れた都市・名所</div>
            <div id="pref-cities"></div>
          </div>
          <div>
            <div id="description-title" class="bold-text">Description etc. — 説明など</div>
            <div id="pref-desc">
              <div id="pref-desc-eng"></div>
              <div id="pref-desc-jp"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="pref-info-handle">
        <hr class="drawer-handle" />
      </div>
    </div>
  </div>

  <!-- Timeline and Picture Gallery -->
  <div style="scroll-snap-align: start;">
    <button id="filter-btn" class="filter-btn large-icon"> &#xf0b0</button>
    <div class="landscape-only" style="position: absolute;">
      <div id="timeline" class="timeline">
        <div id="left-column" class="timeline-column left"></div>
        <div id="right-column" class="timeline-column right"></div>
      </div>
    </div>
    <div id="gallery" class="gallery" style="z-index: 4000;"></div>
  </div>

  <!-- Scroll to top btn -->
  <button id="to-top-btn" class="large-icon floating-btn transparent opacity-transition">&#xf102</button>

  <!-- Filter Popup -->
  <div id="filter-popup" class="hidden-popup" style="z-index: 10000;">
    <div id="filter-popup-bg" class="popup-bg opacity-transition transparent"></div>
    <div id="img-filter-popup" class="popup centered transparent">
      <button id="filter-popup-close-btn" class="large-icon close-btn">&#xf00d</button>
      <div id="filters" class="flex-column popup-content transparent opacity-transition" style="height: 100%">
        <div class="flex-column" style="justify-content: space-between; height: 100%;">
          <div class="flex-column" style="gap: 15px;">
            <div id="filter-title" class="bold-text"></div>
            <div>
              <label id="keyword-title" class="bold-text" for="keyword"></label><br>
              <input type="text" id="keyword"><br>
            </div>
            <div>
              <label id="location-title" class="bold-text"></label><br>
              <div id="location-list" class="tag-list"></div>
            </div>
            <div>
              <label id="tags-title" class="bold-text"></label><br>
              <div id="tags-list" class="tag-list"></div>
            </div>
          </div>
          <div style="display: flex; width: 100%; justify-content: center; gap: 15px; margin-top: 15px;">
            <button id="clear-btn" class="action-btn"></button>
            <button id="submit-btn" class="action-btn"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Popup -->
  <div id="info-popup" class="hidden-popup" style="z-index: 10000;">
    <div id="popup-bg" class="popup-bg opacity-transition transparent"></div>
    <div id="site-info-popup" class="popup centered transparent">
      <button id="info-popup-close-btn" class="large-icon close-btn">&#xf00d</button>
      <div id="site-info" class="flex-column opacity-transition popup-content transparent">
        <div class="regular-text">
          <p class="bold-text">About this site</p>
          <p>I was in Japan on exchange in September 2022 - April 2023. This site contains the highlights of the
            sidetrips
            I made. For privacy reasons, I do not plan to upload pictures of myself or my friends to this page.</p>
          <p>Design, coding, and photography: Katherine (Katie) Lu</p>
        </div>
        <div class="regular-text">
          <p class="bold-text">このサイトについて</p>
          <p>留学のため、2022年9月から2023年4月まで日本に滞在しました。このウェブページでは 皆さんに私の旅行のハイライトを紹介したいと思います。プライバシーのため、自分と知り合いの写真を掲載しません。</p>
          <p>デザイン・プログラミング・写真：ルー・キャサリン（ケイティー）</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Fullscreen Picture -->
  <div id="fullscreen" class="centered hidden-popup opacity-transition transparent fullscreen-container" style="z-index: 6000;">
    <div id="fullscreen-gallery" class="fullscreen-gallery">
      <div id="fullscreen-bg" class="popup-bg opacity-transition transparent" style="z-index: 0;"></div>
      <div id="fullscreen-ctrl" class="fullscreen-ctrl" style="z-index: 1;">
        <button id="left-arrow" class="large-icon fullscreen-arrow">&#xf0d9</button>
        <div>
          <img id="fullscreen-pic-next" class="fullscreen-pic transparent centered" style="display: none; position: absolute;" src="img/BFD9CC0C-53AB-4F00-851A-AAB2D06A37A6.jpeg" />
          <img id="fullscreen-pic" class="fullscreen-pic centered" style="position: absolute;" src="img/BFD9CC0C-53AB-4F00-851A-AAB2D06A37A6.jpeg" />
        </div>
        <button id="right-arrow" class="large-icon fullscreen-arrow">&#xf0da</button>
      </div>
      <button id="pic-info-btn" class="large-icon pic-info-btn" style="z-index: 3;">&#xf05a</button>
    </div>
    <div id="pic-info" style="z-index: 3;">
      <div id="pic-info-bg" class="portrait-only popup-bg transparent"></div>
      <div id="pic-info-drawer" class="pic-info-container">
        <button id="pic-info-close-btn" class="large-icon close-btn portrait-only">&#xf00d</button>
        <div id="pic-info-handle" style="align-self: center;">
          <hr class="drawer-handle" />
        </div>
        <div id="pic-info-details" class="flex-column pic-info-details caption-text">
          <div id="fullscreen-eng-date"></div>
          <div><span id="fullscreen-eng-city"></span> <span id="search-eng"
              class="search-icon">&#xf002</span></div>
          <div id="fullscreen-eng-caption"></div>
          <hr class="divider">
          <div id="fullscreen-jp-date"></div>
          <div><span id="fullscreen-jp-city"></span> <span id="search-jp"
              class="search-icon">&#xf002</span></div>
          <div id="fullscreen-jp-caption"></div>
          <hr class="divider">
          <div id="camera-info"></div>
          <div id="lens-info"></div>
          <div id="technical-info" style="display: flex; gap: 20px; flex-wrap: wrap;"></div>
          <div id="img-tags" class="tag-list"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen opacity-transition" style="z-index: 6000">
    <div id="loader" class="loader">
      <div id="load1" class="loader-dot" style="transform: rotate(270deg) translate(80px)rotate(270deg); animation-delay: 2s;"></div>
      <div id="load2" class="loader-dot" style="transform: rotate(315deg) translate(80px)rotate(315deg); animation-delay: -1.75s;"></div>
      <div id="load3" class="loader-dot" style="transform: rotate(0deg) translate(80px)rotate(0deg); animation-delay: -1.5s;"></div>
      <div id="load4" class="loader-dot" style="transform: rotate(45deg) translate(80px)rotate(45deg); animation-delay: -1.25s;"></div>
      <div id="load5" class="loader-dot" style="transform: rotate(90deg) translate(80px)rotate(90deg); animation-delay: -1s;"></div>
      <div id="load6" class="loader-dot" style="transform: rotate(135deg) translate(80px)rotate(135deg); animation-delay: -0.75s;"></div>
      <div id="load7" class="loader-dot" style="transform: rotate(180deg) translate(80px)rotate(180deg); animation-delay: -0.5s;"></div>
      <div id="load8" class="loader-dot" style="transform: rotate(225deg) translate(80px)rotate(225deg); animation-delay: -0.25s;"></div>
      <div id="load9" class="loader-dot" style="transform: rotate(270deg) translate(80px)rotate(270deg); animation-delay: 0s;"></div>
      <div id="loader-btn" class="centered opacity-transition loader-btn transparent">
        <img id="sakura" src="img/sakura.svg" class="centered" style="position: absolute; width: 85%;">
        <div id="loader-text" class="centered loader-text">
          <p style="margin: 0.5em">Start</p>
          <p style="margin: 0.5em">スタート</p>
        </div>
      </div>
      <div id="error-btn" class="error-btn centered loader-text" onclick="retry()">
        <p style="margin: 0.5em">Failed to fetch data. Try again?</p>
        <p style="margin: 0.5em">データアクセスに失敗しました。再試行する？</p>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <!-- <script src="https://raw.githubusercontent.com/kymlu/travel-memories/main/js/image.js"></script>
  <script src="https://raw.githubusercontent.com/kymlu/travel-memories/main/js/prefecture.js"></script>
  <script src="https://raw.githubusercontent.com/kymlu/travel-memories/main/js/region.js"></script> -->
  <script src="js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.js"></script>
</body>